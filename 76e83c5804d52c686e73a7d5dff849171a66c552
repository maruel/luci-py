{
  "comments": [
    {
      "key": {
        "uuid": "96c3d9d4_c1dcdd51",
        "filename": "appengine/components/components/utils.py",
        "patchSetId": 9
      },
      "lineNbr": 603,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "I find the call site awkward with an empty url. I think I\u0027d prefer a separate function enqueue_pull_task_async(). That would be less confusing.",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c27fac3e_cadf68d3",
        "filename": "appengine/components/components/utils.py",
        "patchSetId": 9
      },
      "lineNbr": 603,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "96c3d9d4_c1dcdd51",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1dcfde5e_2752dbaa",
        "filename": "appengine/components/components/utils.py",
        "patchSetId": 9
      },
      "lineNbr": 662,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "Frankly I don\u0027t see much value in these two functions, I\u0027d recommend to just inline them.",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "408f6bf8_de768a89",
        "filename": "appengine/components/components/utils.py",
        "patchSetId": 9
      },
      "lineNbr": 662,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done. I removed them and just use taskqueue API directly.",
      "parentUuid": "1dcfde5e_2752dbaa",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89e8b2dc_cd0a8487",
        "filename": "appengine/swarming/queue.yaml",
        "patchSetId": 9
      },
      "lineNbr": 71,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "Keep 2 lines between entries to help \"scanability\".",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7706fb87_779d2df9",
        "filename": "appengine/swarming/queue.yaml",
        "patchSetId": 9
      },
      "lineNbr": 71,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89e8b2dc_cd0a8487",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62e0d8c3_a3a40606",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 222,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "Align call arguments at +4 to stay consistent with the rest of the code",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb5c95df_0e428b24",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 222,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "62e0d8c3_a3a40606",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "94ccf806_1182e3e1",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 229,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "guarantee",
      "range": {
        "startLine": 229,
        "startChar": 38,
        "endLine": 229,
        "endChar": 47
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d67eeacf_aefc9a87",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 229,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "94ccf806_1182e3e1",
      "range": {
        "startLine": 229,
        "startChar": 38,
        "endLine": 229,
        "endChar": 47
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10a09afa_7af48aca",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 242,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "+4",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8efd1a3_255ab24c",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 242,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10a09afa_7af48aca",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d44c7b8f_6a7d2560",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 270,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T03:40:47Z",
      "side": 1,
      "message": "I think we should not use scheduler ID as the tag here. Say we have tags, A,B,C and requests came in a pattern of `A B C`. Then requests with scheduler id C, have to wait 2 seconds to get sent. Worker should lease 100 requests with any scheduler ID and send them out.",
      "range": {
        "startLine": 270,
        "startChar": 59,
        "endLine": 270,
        "endChar": 78
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c1e64a6_9146f95a",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 270,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-28T03:46:50Z",
      "side": 1,
      "message": "The tag should be the server host, es_host ?",
      "parentUuid": "d44c7b8f_6a7d2560",
      "range": {
        "startLine": 270,
        "startChar": 59,
        "endLine": 270,
        "endChar": 78
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8d1ef81_0eb77aee",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 270,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T04:01:37Z",
      "side": 1,
      "message": "I was thinking that way in the earlier patchset. However, it also had this issue, unless we allocate each scheduler a job queue. Thus they could push the worker concurrently. But this brings extra work for provisioning a new scheduler. \n\n+---------------+      +----+     +------------------+\n|  job queue A  +-----\u003e+    +----\u003e+ ext scheduler A  |\n+---------------+      |    |     +------------------+\n+---------------+      |    |     +------------------+\n|  job queue B  +-----\u003e+    +----\u003e+ ext scheduler B  |\n+---------------+      |    |     +------------------+\n                       +----+\n                      pull queue\n                      worker\n\nWe could discuss this later once we have other schedulers. For now, I do not think tag may value a lot for us.",
      "parentUuid": "7c1e64a6_9146f95a",
      "range": {
        "startLine": 270,
        "startChar": 59,
        "endLine": 270,
        "endChar": 78
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "952ef867_4809eded",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 270,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f8d1ef81_0eb77aee",
      "range": {
        "startLine": 270,
        "startChar": 59,
        "endLine": 270,
        "endChar": 78
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec7cdd00_390d7414",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 284,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "Personally I\u0027d prefer typed exception, not untyped.",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddbe3875_888f1bda",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 284,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ec7cdd00_390d7414",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e16a27e1_4eb8bb16",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 285,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T03:40:47Z",
      "side": 1,
      "message": "Per failure, we must delete tasks from the queue and add them back. Or it takes 60 seconds for the lease to expire and the job could not wait that long.",
      "range": {
        "startLine": 285,
        "startChar": 6,
        "endLine": 285,
        "endChar": 74
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "825e9d2f_a3068ec2",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 285,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e16a27e1_4eb8bb16",
      "range": {
        "startLine": 285,
        "startChar": 6,
        "endLine": 285,
        "endChar": 74
      },
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77619bce_14b7bc5e",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 290,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-06-27T23:31:52Z",
      "side": 1,
      "message": "Do not swallow the exception, at least log it as warning.",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "885cb056_93586eec",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 9
      },
      "lineNbr": 290,
      "author": {
        "id": 1336288
      },
      "writtenOn": "2019-06-28T17:49:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77619bce_14b7bc5e",
      "revId": "76e83c5804d52c686e73a7d5dff849171a66c552",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}