{
  "comments": [
    {
      "key": {
        "uuid": "ba1ef08c_2930bd51",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-30T06:49:32Z",
      "side": 1,
      "message": "take this issue?",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bca6c88e_ae358d14",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T07:13:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba1ef08c_2930bd51",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0db97715_01391302",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T06:11:27Z",
      "side": 1,
      "message": "I cherry picked crrev.com/c/2410541 and confirmed that it doesn\u0027t pass the tests.\nThe error matches with the one I saw.\nhttps://screenshot.googleplex.com/7YEzWXWqUc34VRT\n\nNow we can fix the logic.",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d3e55861_cfdcd5c1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T06:13:31Z",
      "side": 1,
      "message": "\u003e The error matches with the one I saw.\ntest logs go/paste/5220871112228864",
      "parentUuid": "0db97715_01391302",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19cf0fb5_aeea1c97",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T06:25:24Z",
      "side": 1,
      "message": "I came up with 2 options to fix the error.\nMy preference is option2.\n\nWDYT?",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa2fa0e0_c8f142c5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-30T06:49:32Z",
      "side": 1,
      "message": "I bit prefer option 1 for explicity if notify_requests is not called from many places.",
      "parentUuid": "19cf0fb5_aeea1c97",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ef033c5_36f1e8b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T07:13:10Z",
      "side": 1,
      "message": "Hmm, I see your point..\n\nBut it\u0027s called directly/indirectly in many types of contexts...\nhttps://source.chromium.org/search?q\u003dnotify_requests%20f:swarming%20-f:_test.py%20\u0026ss\u003dchromium\n\nWe would need more tests/assertions in task_scheduler_test.py.\nhttps://source.chromium.org/chromium/infra/infra/+/master:luci/appengine/swarming/server/task_scheduler_test.py;l\u003d817-868\n\nEven if we add tests, I wouldn\u0027t be confident since notify_requests() is mocked there.\nhttps://chromium.googlesource.com/infra/luci/luci-py/+/1010d337cf47f72d942571bdf4c994c5c8ffcd29/appengine/swarming/server/task_scheduler_test.py#813",
      "parentUuid": "aa2fa0e0_c8f142c5",
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39928ed5_d84cd35e",
        "filename": "appengine/swarming/server/external_scheduler.py",
        "patchSetId": 4
      },
      "lineNbr": 171,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T06:25:24Z",
      "side": 1,
      "message": "Option1) add an argument \"transactional\" (default False) to specify it at higher level.",
      "range": {
        "startLine": 171,
        "startChar": 75,
        "endLine": 171,
        "endChar": 76
      },
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0eb71880_c3a062db",
        "filename": "appengine/swarming/server/task_request.py",
        "patchSetId": 4
      },
      "lineNbr": 1347,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-30T06:25:24Z",
      "side": 1,
      "message": "Option2) Change this condition to \"if not ndb.in_transation()\" to skip the logic, rather than specifying expected transactional state.",
      "range": {
        "startLine": 1347,
        "startChar": 0,
        "endLine": 1347,
        "endChar": 27
      },
      "revId": "eb06351c68ae8ba69ccf9063ce666af26336c441",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}