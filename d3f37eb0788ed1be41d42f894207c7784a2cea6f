{
  "comments": [
    {
      "key": {
        "uuid": "93b74b2c_e92c602f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T06:56:08Z",
      "side": 1,
      "message": "Please give early feedback on this CL. \nI\u0027m not confident with cache cleanup part.",
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ea2d772_b6e73e4b",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1549,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T07:07:06Z",
      "side": 1,
      "message": "I prefer not to keep commented out code.",
      "range": {
        "startLine": 1543,
        "startChar": 0,
        "endLine": 1549,
        "endChar": 27
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73f1eea7_a49c18e2",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1553,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T07:07:06Z",
      "side": 1,
      "message": "no need to have this?",
      "range": {
        "startLine": 1553,
        "startChar": 45,
        "endLine": 1553,
        "endChar": 53
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "90e23aba_454f794f",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1565,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T07:44:40Z",
      "side": 1,
      "message": "Do not instantiate this.\nThis overwrites cache state file written by cas client.\nhttps://source.chromium.org/chromium/infra/infra/+/master:luci/client/local_caching.py;l\u003d461;drc\u003d7d9336444499c0e696f071dd3b2650ade6d842bc",
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6895992_1fa30188",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1565,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T08:29:05Z",
      "side": 1,
      "message": "So we need DiskContentAddressedCache to be instantiated only for cleanups and trims?",
      "parentUuid": "90e23aba_454f794f",
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "555e2741_2215dddb",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1565,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T08:32:53Z",
      "side": 1,
      "message": "yeah",
      "parentUuid": "b6895992_1fa30188",
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ea6ad44_96de30f4",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1681,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T06:56:08Z",
      "side": 1,
      "message": "Please review this part carefully as it caused outage last year.",
      "range": {
        "startLine": 1676,
        "startChar": 0,
        "endLine": 1681,
        "endChar": 62
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "474dfaef_14b96b6b",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T06:56:08Z",
      "side": 1,
      "message": "When does `cas_cache` need to be included in caches?",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb3cd439_25467c50",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T07:07:06Z",
      "side": 1,
      "message": "this line needs to have both.",
      "parentUuid": "474dfaef_14b96b6b",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c69b44b_cc5e8ce9",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T07:13:28Z",
      "side": 1,
      "message": "Assuming named_cache is given, are the following expectations correct?\n\n1) use_go_isolated\ncaches \u003d [cas_cache, named_cache]\n\n2) otherwise\ncaches \u003d [isolate_cache, cas_cache, named_cache]\n\nIf so, the line 1676-1681 are wrong.",
      "parentUuid": "bb3cd439_25467c50",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd0f4636_32cdcb6f",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T07:17:55Z",
      "side": 1,
      "message": "I think this should be always 2).",
      "parentUuid": "5c69b44b_cc5e8ce9",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6868504_7337eb3a",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T07:28:10Z",
      "side": 1,
      "message": "Looking at line 1621 of the parent revision, isolated_cache isn\u0027t set when use_go_isolated \u003d True?",
      "parentUuid": "fd0f4636_32cdcb6f",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "474e7532_cdf6715e",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T07:44:40Z",
      "side": 1,
      "message": "Ah, I see.\nAnd I think that may the reason of https://crbug.com/1115215\n\nCan you instantiate DiskContentAddressedCache only in this scope?",
      "parentUuid": "e6868504_7337eb3a",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6c386e71_661f675a",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T08:25:12Z",
      "side": 1,
      "message": "\u003e Can you instantiate DiskContentAddressedCache only in this scope?\n\nThat\u0027s for isolated_cache, right?\nLet me make another CL.",
      "parentUuid": "474e7532_cdf6715e",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f47d42f_d2920711",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-18T08:32:53Z",
      "side": 1,
      "message": "I think we need DiskContentAddressedCache both for isolated and cas.\nBut make sure that doesn\u0027t overwrite cache state file updated by go client",
      "parentUuid": "6c386e71_661f675a",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70cf593f_08809337",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T09:42:56Z",
      "side": 1,
      "message": "Yeah, all caches need to be trimmed here, indeed.\nBut I want to make sure that trimming isolated_cache here isn\u0027t harmful.\n\n\u003e And I think that may the reason of https://crbug.com/1115215\nLooks related. But I\u0027m not sure trimming would resolve the bug.",
      "parentUuid": "3f47d42f_d2920711",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fbc4da1_aa474460",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-09-18T10:25:24Z",
      "side": 1,
      "message": "tikuta,\nDo you remember at which step the state json was updated unexpectedly, and caused https://crrev.com/c/1990538?\n\nI concern that trimming isolate_cache here may cause the same issue.",
      "parentUuid": "70cf593f_08809337",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6571b93b_eecb1efa",
        "filename": "client/run_isolated.py",
        "patchSetId": 3
      },
      "lineNbr": 1726,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-09-23T00:40:43Z",
      "side": 1,
      "message": "\u003e tikuta,\n\u003e Do you remember at which step the state json was updated unexpectedly, and caused https://crrev.com/c/1990538?\n\u003e \n\nAh, I think that CL may try to prevent state update in trim_cache, but there seems no other place updating state.json if go client is used.",
      "parentUuid": "4fbc4da1_aa474460",
      "range": {
        "startLine": 1723,
        "startChar": 0,
        "endLine": 1726,
        "endChar": 15
      },
      "revId": "d3f37eb0788ed1be41d42f894207c7784a2cea6f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}