{
  "comments": [
    {
      "key": {
        "uuid": "40aeb1e3_a56ee28c",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 924,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "are",
      "range": {
        "startLine": 924,
        "startChar": 21,
        "endLine": 924,
        "endChar": 23
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55a875ea_ed61be78",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 924,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "look up",
      "range": {
        "startLine": 924,
        "startChar": 75,
        "endLine": 924,
        "endChar": 79
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28e70b86_f10ce20f",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 924,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "40aeb1e3_a56ee28c",
      "range": {
        "startLine": 924,
        "startChar": 21,
        "endLine": 924,
        "endChar": 23
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74d7d02b_e3c9b1d0",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 924,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "55a875ea_ed61be78",
      "range": {
        "startLine": 924,
        "startChar": 75,
        "endLine": 924,
        "endChar": 79
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "46cf1c46_f0ceceff",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 931,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "Should this be \"... snapshots\"? Would it be accurate to say \"number of events processed\"?",
      "range": {
        "startLine": 931,
        "startChar": 10,
        "endLine": 931,
        "endChar": 39
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a1aeab8_cd3fff9c",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 931,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Oops that\u0027s a copy paste error from isolate. Fixed.",
      "parentUuid": "46cf1c46_f0ceceff",
      "range": {
        "startLine": 931,
        "startChar": 10,
        "endLine": 931,
        "endChar": 39
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ae988a4_42fb2471",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 946,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "This is a clever way of checking whether the key is set while also setting it. Which may be good It might be more explicit to explicitly check with memcache.get before setting with memcache.add.",
      "range": {
        "startLine": 946,
        "startChar": 9,
        "endLine": 946,
        "endChar": 21
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f9614b5_68940504",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 946,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Doing so wouldn\u0027t give any additional benefit and just add one more RPC.",
      "parentUuid": "4ae988a4_42fb2471",
      "range": {
        "startLine": 946,
        "startChar": 9,
        "endLine": 946,
        "endChar": 21
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ce23e93_ff5d479a",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 952,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "Maybe this comment could go above the `if not memcache.add` block since it\u0027s relevant to that.",
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c6d1bf40_269754ef",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 952,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9ce23e93_ff5d479a",
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5bdfd0cf_5b1588ff",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 959,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "Would \"running\" also be unset if the request takes longer than the amount of time that \u0027running\u0027 is set for? (400s?)",
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f689a1f_129b9d2e",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 959,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Yes, there\u0027s a 100s buffer for this, but the loop below takes on average 3 seconds per iteration.",
      "parentUuid": "5bdfd0cf_5b1588ff",
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39774704_f0cddd2e",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 964,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "\"... more than 500 failed events pending to send\"? I interpret this as meaning that we\u0027re assuming that len(state.failed) is always \u003c\u003d 500",
      "range": {
        "startLine": 964,
        "startChar": 34,
        "endLine": 964,
        "endChar": 57
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "832ae1d1_ebf9995c",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 964,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Yes.",
      "parentUuid": "39774704_f0cddd2e",
      "range": {
        "startLine": 964,
        "startChar": 34,
        "endLine": 964,
        "endChar": 57
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c65fa307_fb9eb67c",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 978,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "remove",
      "range": {
        "startLine": 978,
        "startChar": 39,
        "endLine": 978,
        "endChar": 46
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a5dbc49_6172a631",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 978,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c65fa307_fb9eb67c",
      "range": {
        "startLine": 978,
        "startChar": 39,
        "endLine": 978,
        "endChar": 46
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09cca339_3edb5bae",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 1002,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "Perhaps the body of the `try` or `while` could be extracted.\n\nThis is similar to a few other comments/discussions I made before though -- it would be a helper function that\u0027s only used in one place, so IMO the advantage would be (1) less nesting, (2) shorter function, whereas the disadvantage would be (1) fragmenting the code, (2) more functions. The function isn\u0027t *too* long, I suppose, so I imagine you\u0027ll want to keep this as is.",
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1489a9f1_1658e172",
        "filename": "appengine/swarming/server/bot_management.py",
        "patchSetId": 6
      },
      "lineNbr": 1002,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "I plan to add more functions to this, as I\u0027m going to add more BigQuery tables, the next one being Tasks.\n\nI plan to refactor the 3 copies into a generic function once I figured out what\u0027s the common part.",
      "parentUuid": "09cca339_3edb5bae",
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03c40e34_6cdeba12",
        "filename": "appengine/swarming/setup_bigquery.sh",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-12-13T23:09:15Z",
      "side": 1,
      "message": "This is thoughtful :-)",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 79,
        "endChar": 35
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a526915_fc302a4d",
        "filename": "appengine/swarming/setup_bigquery.sh",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-12-16T02:11:51Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "03c40e34_6cdeba12",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 79,
        "endChar": 35
      },
      "revId": "47ef7c44ae5ed93c6c5761c803f1a6e63c9f5f86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}