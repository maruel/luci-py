!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/newres/",s(s.s=10)}([function(e,t,s){"use strict";function i(e,t){if(e.hasOwnProperty(t)){let s=e[t];delete e[t],e[t]=s}}s.d(t,"a",function(){return i})},function(e,t,s){"use strict";const i=new Map;class n{constructor(e,t,s,i=k){this.strings=e,this.values=t,this.type=s,this.partCallback=i}getHTML(){const e=this.strings.length-1;let t="",s=!0;for(let i=0;i<e;i++){const e=this.strings[i];t+=e;const n=c(e);t+=(s=n>-1?n<e.length:s)?o:a}return t+this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}function r(e,t,s=function(e){let t=i.get(e.type);void 0===t&&(t=new Map,i.set(e.type,t));let s=t.get(e.strings);return void 0===s&&(s=new _(e,e.getTemplateElement()),t.set(e.strings,s)),s}){const n=s(e);let r=t.__templateInstance;if(void 0!==r&&r.template===n&&r._partCallback===e.partCallback)return void r.update(e.values);r=new y(n,e.partCallback,s),t.__templateInstance=r;const a=r._clone();r.update(e.values),w(t,t.firstChild),t.appendChild(a)}const a=`{{lit-${String(Math.random()).slice(2)}}}`,o=`\x3c!--${a}--\x3e`,l=new RegExp(`${a}|${o}`),d=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;function c(e){const t=e.lastIndexOf(">");return e.indexOf("<",t+1)>-1?e.length:t}class h{constructor(e,t,s,i,n){this.type=e,this.index=t,this.name=s,this.rawName=i,this.strings=n}}const u=e=>-1!==e.index;class _{constructor(e,t){this.parts=[],this.element=t;const s=this.element.content,i=document.createTreeWalker(s,133,null,!1);let n=-1,r=0;const o=[];let c,u;for(;i.nextNode();){n++,c=u;const t=u=i.currentNode;if(1===t.nodeType){if(!t.hasAttributes())continue;const s=t.attributes;let i=0;for(let e=0;e<s.length;e++)s[e].value.indexOf(a)>=0&&i++;for(;i-- >0;){const i=e.strings[r],a=d.exec(i)[1],o=s.getNamedItem(a),c=o.value.split(l);this.parts.push(new h("attribute",n,o.name,a,c)),t.removeAttribute(o.name),r+=c.length-1}}else if(3===t.nodeType){const e=t.nodeValue;if(e.indexOf(a)<0)continue;const s=t.parentNode,i=e.split(l),d=i.length-1;r+=d;for(let e=0;e<d;e++)s.insertBefore(""===i[e]?document.createComment(""):document.createTextNode(i[e]),t),this.parts.push(new h("node",n++));s.insertBefore(""===i[d]?document.createComment(""):document.createTextNode(i[d]),t),o.push(t)}else if(8===t.nodeType&&t.nodeValue===a){const e=t.parentNode,s=t.previousSibling;null===s||s!==c||s.nodeType!==Node.TEXT_NODE?e.insertBefore(document.createComment(""),t):n--,this.parts.push(new h("node",n++)),o.push(t),null===t.nextSibling?e.insertBefore(document.createComment(""),t):n--,u=c,r++}}for(const e of o)e.parentNode.removeChild(e)}}const p=(e,t)=>f(t)?(t=t(e),m):null===t?void 0:t,f=e=>"function"==typeof e&&!0===e.__litDirective,m={},b=e=>null===e||!("object"==typeof e||"function"==typeof e);class g{constructor(e,t,s,i){this.instance=e,this.element=t,this.name=s,this.strings=i,this.size=i.length-1,this._previousValues=[]}_interpolate(e,t){const s=this.strings,i=s.length-1;let n="";for(let r=0;r<i;r++){n+=s[r];const i=p(this,e[t+r]);if(i&&i!==m&&(Array.isArray(i)||"string"!=typeof i&&i[Symbol.iterator]))for(const e of i)n+=e;else n+=i}return n+s[i]}_equalToPreviousValues(e,t){for(let s=t;s<t+this.size;s++)if(this._previousValues[s]!==e[s]||!b(e[s]))return!1;return!0}setValue(e,t){if(this._equalToPreviousValues(e,t))return;const s=this.strings;let i;2===s.length&&""===s[0]&&""===s[1]?(i=p(this,e[t]),Array.isArray(i)&&(i=i.join(""))):i=this._interpolate(e,t),i!==m&&this.element.setAttribute(this.name,i),this._previousValues=e}}class v{constructor(e,t,s){this.instance=e,this.startNode=t,this.endNode=s,this._previousValue=void 0}setValue(e){if((e=p(this,e))!==m)if(b(e)){if(e===this._previousValue)return;this._setText(e)}else e instanceof n?this._setTemplateResult(e):Array.isArray(e)||e[Symbol.iterator]?this._setIterable(e):e instanceof Node?this._setNode(e):void 0!==e.then?this._setPromise(e):this._setText(e)}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_setNode(e){this._previousValue!==e&&(this.clear(),this._insert(e),this._previousValue=e)}_setText(e){const t=this.startNode.nextSibling;e=void 0===e?"":e,t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._setNode(document.createTextNode(e)),this._previousValue=e}_setTemplateResult(e){const t=this.instance._getTemplate(e);let s;this._previousValue&&this._previousValue.template===t?s=this._previousValue:(s=new y(t,this.instance._partCallback,this.instance._getTemplate),this._setNode(s._clone()),this._previousValue=s),s.update(e.values)}_setIterable(e){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);const t=this._previousValue;let s=0;for(const i of e){let e=t[s];if(void 0===e){let i=this.startNode;s>0&&(i=t[s-1].endNode=document.createTextNode(""),this._insert(i)),e=new v(this.instance,i,this.endNode),t.push(e)}e.setValue(i),s++}if(0===s)this.clear(),this._previousValue=void 0;else if(s<t.length){const e=t[s-1];t.length=s,this.clear(e.endNode.previousSibling),e.endNode=this.endNode}}_setPromise(e){this._previousValue=e,e.then(t=>{this._previousValue===e&&this.setValue(t)})}clear(e=this.startNode){w(this.startNode.parentNode,e.nextSibling,this.endNode)}}const k=(e,t,s)=>{if("attribute"===t.type)return new g(e,s,t.name,t.strings);if("node"===t.type)return new v(e,s,s.nextSibling);throw new Error(`Unknown part type ${t.type}`)};class y{constructor(e,t,s){this._parts=[],this.template=e,this._partCallback=t,this._getTemplate=s}update(e){let t=0;for(const s of this._parts)s?void 0===s.size?(s.setValue(e[t]),t++):(s.setValue(e,t),t+=s.size):t++}_clone(){const e=this.template.element.content.cloneNode(!0),t=this.template.parts;if(t.length>0){const s=document.createTreeWalker(e,133,null,!1);let i=-1;for(let e=0;e<t.length;e++){const n=t[e],r=u(n);if(r)for(;i<n.index;)i++,s.nextNode();this._parts.push(r?this._partCallback(this,n,s.currentNode):void 0)}}return e}}const w=(e,t,s=null)=>{let i=t;for(;i!==s;){const t=i.nextSibling;e.removeChild(i),i=t}};s.d(t,"a",function(){return x}),s.d(t,"b",function(){return r});const x=(e,...t)=>new n(e,t,"html",E),E=(e,t,s)=>{if("attribute"===t.type){if("on-"===t.rawName.substr(0,3)){return new class{constructor(e,t,s){this.instance=e,this.element=t,this.eventName=s}setValue(e){const t=p(this,e);t!==this._listener&&(null==t?this.element.removeEventListener(this.eventName,this):null==this._listener&&this.element.addEventListener(this.eventName,this),this._listener=t)}handleEvent(e){"function"==typeof this._listener?this._listener.call(this.element,e):"function"==typeof this._listener.handleEvent&&this._listener.handleEvent(e)}}(e,s,t.rawName.slice(3))}const i=t.name.substr(t.name.length-1);if("$"===i){const i=t.name.slice(0,-1);return new g(e,s,i,t.strings)}if("?"===i){return new class extends g{setValue(e,t){const s=this.strings;if(2!==s.length||""!==s[0]||""!==s[1])throw new Error("boolean attributes can only contain a single expression");{const s=p(this,e[t]);if(s===m)return;s?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}}(e,s,t.name.slice(0,-1),t.strings)}return new class extends g{setValue(e,t){const s=this.strings;let i;this._equalToPreviousValues(e,t)||((i=2===s.length&&""===s[0]&&""===s[1]?p(this,e[t]):this._interpolate(e,t))!==m&&(this.element[this.name]=i),this._previousValues=e)}}(e,s,t.rawName,t.strings)}return k(e,t,s)}},function(e,t,s){"use strict";function i(e,t=1e4){"object"==typeof e&&(e=e.message||JSON.stringify(e));var s={message:e,duration:t};document.dispatchEvent(new CustomEvent("error-sk",{detail:s,bubbles:!0}))}s.d(t,"a",function(){return i})},function(e,t,s){"use strict";function i(e){if(e.ok)return e.json();throw{message:`Bad network response: ${e.statusText}`,resp:e,status:e.status}}s.d(t,"a",function(){return i})},function(e,t,s){"use strict";s.d(t,"a",function(){return n});const i=document.createElement("template");class n extends HTMLElement{constructor(){super(),i.innerHTML=`<svg class="icon-sk-svg" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">${this.constructor._svg}</svg>`}connectedCallback(){let e=i.content.cloneNode(!0);this.appendChild(e)}}},function(e,t,s){"use strict";var i=s(1),n=s(0),r=s(3),a=s(2),o=(s(24),s(4));window.customElements.define("menu-icon-sk",class extends o.a{static get _svg(){return'<path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>'}}),window.customElements.define("spinner-sk",class extends HTMLElement{connectedCallback(){Object(n.a)(this,"active")}get active(){return this.hasAttribute("active")}set active(e){e?this.setAttribute("active",""):this.removeAttribute("active")}});s(22),s(21);window.customElements.define("oauth-login",class extends HTMLElement{connectedCallback(){Object(n.a)(this,"client_id"),Object(n.a)(this,"testing_offline"),this._auth_header="",this.testing_offline?this._profile={email:"missing@chromium.org",imageURL:"http://storage.googleapis.com/gd-wagtail-prod-assets/original_images/logo_google_fonts_color_2x_web_64dp.png"}:(this._profile=null,document.addEventListener("oauth-lib-loaded",()=>{gapi.auth2.init({client_id:this.client_id}).then(()=>{this._maybeFireLoginEvent(),this._render()},e=>{console.error(e),Object(a.a)(`Error initializing oauth: ${JSON.stringify(e)}`,1e4)})})),this._render()}static get observedAttributes(){return["client_id","testing_offline"]}get auth_header(){return this._auth_header}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.getAttribute("testing_offline")}set testing_offline(e){e&&"false"!==e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}_maybeFireLoginEvent(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e.isSignedIn()){let t=e.getBasicProfile();this._profile={email:t.getEmail(),imageURL:t.getImageUrl()};let s=e.getAuthResponse(!0),i=`${s.token_type} ${s.access_token}`;return this.dispatchEvent(new CustomEvent("log-in",{detail:{auth_header:i},bubbles:!0})),this._auth_header=i,!0}return this._profile=null,this._auth_header="",!1}_logIn(){if(this.testing_offline)this._auth_header="Bearer 12345678910-boomshakalaka",this.dispatchEvent(new CustomEvent("log-in",{detail:{auth_header:this._auth_header},bubbles:!0})),this._render();else{let e=gapi.auth2.getAuthInstance();e&&e.signIn({scope:"email",prompt:"select_account"}).then(()=>{this._maybeFireLoginEvent()||console.warn("login was not successful; maybe user canceled"),this._render()})}}_logOut(){if(this.testing_offline)this._auth_header="",this._render(),window.location.reload();else{let e=gapi.auth2.getAuthInstance();e&&e.signOut().then(()=>{this._auth_header="",this._profile=null,window.location.reload()})}}_render(){Object(i.b)((e=>e.auth_header?i["a"]` <div> <img class=center id=avatar src="${e._profile.imageURL}" width=30 height=30> <span class=center>${e._profile.email}</span> <span class=center>|</span> <a class=center on-click=${()=>e._logOut()} href="#">Sign out</a> </div>`:i["a"]` <div> <a on-click=${()=>e._logIn()} href="#">Sign in</a> </div>`)(this),this)}attributeChangedCallback(e,t,s){this._render()}});const l=document.createElement("template");l.innerHTML="\n<button class=toggle-button>\n  <menu-icon-sk>\n  </menu-icon-sk>\n</button>\n";const d=document.createElement("template");d.innerHTML="\n<div class=spinner-spacer>\n  <spinner-sk></spinner-sk>\n</div>\n";window.customElements.define("swarming-app",class extends HTMLElement{constructor(){super(),this._busyTaskCount=0,this._spinner=null,this._dynamicEle=null,this._auth_header="",this._server_details={server_version:"You must log in to see more details",bot_version:""},this._permissions={}}connectedCallback(){Object(n.a)(this,"client_id"),Object(n.a)(this,"testing_offline"),this._addHTML(),this.addEventListener("log-in",e=>{this._auth_header=e.detail.auth_header,this._fetch()}),this._render()}static get observedAttributes(){return["client_id","testing_offline"]}get busy(){return!!this._busyTaskCount}get permissions(){return this._permissions}get server_details(){return this._server_details}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.getAttribute("testing_offline")}set testing_offline(e){e&&"false"!==e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}addBusyTasks(e){this._busyTaskCount+=e,this._spinner&&this._busyTaskCount>0&&(this._spinner.active=!0)}finishedTask(){this._busyTaskCount--,this._busyTaskCount<=0&&(this._busyTaskCount=0,this._spinner&&(this._spinner.active=!1),this.dispatchEvent(new CustomEvent("busy-end",{bubbles:!0})))}_addHTML(){let e=this.querySelector("header"),t=e&&e.querySelector("aside");if(!(e&&t&&t.classList.contains("hideable")))return;let s=l.content.cloneNode(!0);e.insertBefore(s,e.firstElementChild),(s=e.firstElementChild).addEventListener("click",e=>this._toggleMenu(e,t));let i=d.content.cloneNode(!0);e.insertBefore(i,t),this._spinner=e.querySelector("spinner-sk");let n=document.createElement("span");n.classList.add("grow"),e.appendChild(n),this._dynamicEle=document.createElement("div"),this._dynamicEle.classList.add("right"),e.appendChild(this._dynamicEle)}_toggleMenu(e,t){t.classList.toggle("shown")}_fetch(){if(!this._auth_header)return;this._server_details={server_version:"<loading>",bot_version:"<loading>"};let e={headers:{authorization:this._auth_header}};this.addBusyTasks(2),fetch("/_ah/api/swarming/v1/server/details",e).then(r.a).then(e=>{this._server_details=e,this._render(),this.dispatchEvent(new CustomEvent("server-details-loaded",{bubbles:!0})),this.finishedTask()}).catch(e=>{403===e.status?(this._server_details={server_version:"User unauthorized - try logging in with a different account",bot_version:""},this._render(),this.dispatchEvent(new CustomEvent("server-details-loaded",{bubbles:!0}))):(console.error(e),Object(a.a)(`Unexpected error loading details: ${e.message}`,5e3)),this.finishedTask()}),fetch("/_ah/api/swarming/v1/server/permissions",e).then(r.a).then(e=>{this._permissions=e,this._render(),this.dispatchEvent(new CustomEvent("permissions-loaded",{bubbles:!0})),this.finishedTask()}).catch(e=>{403!==e.status&&(console.error(e),Object(a.a)(`Unexpected error loading permissions: ${e.message}`,5e3)),this.finishedTask()})}_render(){this._dynamicEle&&Object(i.b)((e=>i["a"]` <div class=server-version> Server: <a href$=${function(e){if(e&&e.server_version){var t=e.server_version.split("-");if(2===t.length)return`https://chromium.googlesource.com/infra/luci/luci-py/+/${t[1]}`}}(e._server_details)}> ${e._server_details.server_version} </a> </div> <oauth-login client_id=${e.client_id} testing_offline=${e.testing_offline}></oauth-login> `)(this),this._dynamicEle)}attributeChangedCallback(e,t,s){this._render()}});s(20)},function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(2),n=s(1),r=s(0);class a extends HTMLElement{constructor(e){super(),this._template=e,this._app=null,this._auth_header="",this._notAuthorized=!1}connectedCallback(){Object(r.a)(this,"client_id"),Object(r.a)(this,"testing_offline"),this.addEventListener("log-in",e=>{this._auth_header=e.detail.auth_header})}static get observedAttributes(){return["client_id","testing_offline"]}get app(){return this._app}get auth_header(){return this._auth_header}get loggedInAndAuthorized(){return!!this._auth_header&&!this._notAuthorized}get permissions(){return this._app&&this._app.permissions||{}}get server_details(){return this._app&&this._app.server_details||{}}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.getAttribute("testing_offline")}set testing_offline(e){e&&"false"!==e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}fetchError(e,t){403===e.status?(this._message="User unauthorized - try logging in with a different account",this._notAuthorized=!0,this.render()):(console.error(e),Object(i.a)(`Unexpected error loading ${t}: ${e.message}`,5e3)),this._app.finishedTask()}render(){Object(n.b)(this._template(this),this),this._app||(this._app=this.firstElementChild,Object(n.b)(this._template(this),this))}attributeChangedCallback(e,t,s){this.render()}}},function(e,t){e.exports=function e(t,s){"use strict";var i,n,r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,d=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=c(t).replace(a,"")||"",u=c(s).replace(a,"")||"",_=h.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=u.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(h.match(l),16)||1!==_.length&&h.match(o)&&Date.parse(h),m=parseInt(u.match(l),16)||f&&u.match(o)&&Date.parse(u)||null;if(m){if(f<m)return-1;if(f>m)return 1}for(var b=0,g=Math.max(_.length,p.length);b<g;b++){if(i=!(_[b]||"").match(d)&&parseFloat(_[b])||_[b]||0,n=!(p[b]||"").match(d)&&parseFloat(p[b])||p[b]||0,isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return-1;if(i>n)return 1}return 0}},function(e,t,s){"use strict";var i=s(0);window.customElements.define("toast-sk",class extends HTMLElement{constructor(){super(),this._timer=null}connectedCallback(){this.hasAttribute("duration")||(this.duration=5e3),Object(i.a)(this,"duration")}get duration(){return+this.getAttribute("duration")}set duration(e){this.setAttribute("duration",e)}show(){this.setAttribute("shown",""),this.duration>0&&!this._timer&&(this._timer=window.setTimeout(()=>{this._timer=null,this.hide()},this.duration))}hide(){this.removeAttribute("shown"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)}});s(19);window.customElements.define("error-toast-sk",class extends HTMLElement{connectedCallback(){this.innerHTML="<toast-sk></toast-sk>",this._toast=this.firstElementChild,document.addEventListener("error-sk",this)}disconnectedCallback(){document.removeEventListener("error-sk",this)}handleEvent(e){e.detail.duration&&(this._toast.duration=e.detail.duration),this._toast.textContent=e.detail.message,this._toast.show()}})},,function(e,t,s){"use strict";s.r(t);s(8);var i=s(1),n=s(0),r=(s(24),s(4));function a(e,t,s=!0){Object(n.a)(e,t),void 0===e[t]&&e.hasAttribute(t)&&(e[t]=e.getAttribute(t),s&&e.removeAttribute(t))}window.customElements.define("arrow-drop-down-icon-sk",class extends r.a{static get _svg(){return'<path d="M7 10l5 5 5-5z"/>'}}),window.customElements.define("arrow-drop-up-icon-sk",class extends r.a{static get _svg(){return'<path d="M7 14l5-5 5 5z"/>'}});window.customElements.define("sort-toggle",class extends HTMLElement{constructor(){super()}connectedCallback(){a(this,"current"),a(this,"key"),a(this,"direction"),this.addEventListener("click",()=>{this.toggle()})}get current(){return this._current}set current(e){this._current=e,this.render()}get key(){return this._key}set key(e){this._key=e,this.render()}get direction(){return this._direction}set direction(e){this._direction=e,this.render()}toggle(){"asc"===this.direction?this.direction="desc":this.direction="asc",this.dispatchEvent(new CustomEvent("sort-change",{detail:{direction:this.direction,key:this.key},bubbles:!0}))}render(){Object(i.b)((e=>i["a"]` <arrow-drop-down-icon-sk hidden?=${e.key===e.current&&"asc"===e.direction}></arrow-drop-down-icon-sk> <arrow-drop-up-icon-sk hidden?=${e.key===e.current&&"desc"===e.direction}></arrow-drop-up-icon-sk> `)(this),this)}});s(18),s(5);var o=s(3),l=s(7),d=s.n(l);new Promise(function(e,t){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)});window.customElements.define("select-sk",class extends HTMLElement{constructor(){super(),this._obs=new MutationObserver(()=>this._bubbleUp()),this._selection=-1}connectedCallback(){Object(n.a)(this,"selection"),Object(n.a)(this,"disabled"),this.addEventListener("click",this._click),this._obs.observe(this,{childList:!0}),this._bubbleUp()}disconnectedCallback(){this.removeEventListener("click",this._click),this._obs.disconnect()}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?(this.setAttribute("disabled",""),this.selection=-1):(this.removeAttribute("disabled"),this._bubbleUp())}get selection(){return this._selection}set selection(e){this.disabled||(void 0!==e&&null!==e||(e=-1),this._selection=+e,this._rationalize())}_click(e){if(this.disabled)return;let t=this._selection,s=e.target;for(;s&&s.parentElement!==this;)s=s.parentElement;if(s&&s.parentElement===this)for(let e=0;e<this.children.length;e++)if(this.children[e]===s){this._selection=e;break}this._rationalize(),t!=this._selection&&this.dispatchEvent(new CustomEvent("selection-changed",{detail:{selection:this._selection},bubbles:!0}))}_rationalize(){for(let e=0;e<this.children.length;e++)this._selection===e?this.children[e].setAttribute("selected",""):this.children[e].removeAttribute("selected")}_bubbleUp(){if(this._selection=-1,!this.disabled){for(let e=0;e<this.children.length;e++)if(this.children[e].hasAttribute("selected")){this._selection=e;break}this._rationalize()}}});s(17);window.customElements.define("checkbox-sk",class extends HTMLElement{get _role(){return"checkbox"}static get observedAttributes(){return["checked","disabled","name","label"]}connectedCallback(){this.innerHTML=`<label><input type=${this._role}></input><span class=box></span><span class=label></span></label>`,this._label=this.querySelector(".label"),this._input=this.querySelector("input"),Object(n.a)(this,"checked"),Object(n.a)(this,"disabled"),Object(n.a)(this,"name"),Object(n.a)(this,"label"),this._input.checked=this.checked,this._input.disabled=this.disabled,this._input.setAttribute("name",this.getAttribute("name")),this._label.textContent=this.getAttribute("label")}get checked(){return this.hasAttribute("checked")}set checked(e){let t=!!e;this._input.checked=t,e?this.setAttribute("checked",""):this.removeAttribute("checked")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){let t=!!e;this._input.disabled=t,t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get name(){return this._input.getAttribute("name")}set name(e){this.setAttribute("name",e),this._input.setAttribute("name",e)}get label(){return this._input.getAttribute("label")}set label(e){this.setAttribute("label",e),this._input.setAttribute("label",e)}attributeChangedCallback(e,t,s){if(!this._input)return;let i=null!=s;switch(e){case"checked":this._input.checked=i;break;case"disabled":this._input.disabled=i;break;case"name":this._input.name=s;break;case"label":this._label.textContent=s}}});s(16);window.customElements.define("arrow-forward-icon-sk",class extends r.a{static get _svg(){return'<path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>'}}),window.customElements.define("remove-circle-outline-icon-sk",class extends r.a{static get _svg(){return'<path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>'}});const c=[{units:"w",delta:604800},{units:"d",delta:86400},{units:"h",delta:3600},{units:"m",delta:60},{units:"s",delta:1}];function h(e,t){for(let s=0;s<t.length-1;s++)if(Math.round(e/t[s+1].delta)*t[s+1].delta/t[s].delta>=1)return Math.round(e/t[s].delta)+t[s].units;let s=t.length-1;return Math.round(e/t[s].delta)+t[s].units}function u(e){if(!e)return{};let t=[],s=0;for(let i in e)t.push(i+": "+e[i]),s+=+e[i];return{average:s=(s/=t.length)?s.toFixed(1):"unknown",zones:t.join(" | ")||"unknown"}}function _(e,t,s){return s=s||"UNKNOWN",f(e,t)||m(e,t)||[s]}function p(e,t,s){if(!t)return console.warn("falsey bot passed into column"),"";let i=w[e];return i?i(t,s):function(e,t){if(t)return e.join(" | ");let s="";for(let t=0;t<e.length;t++)e[t]&&e[t].length>s.length&&(s=e[t]);return s}(_(t,e,"none"),s._verbose)}function f(e,t){if(!e||!e.dimensions||!t)return null;for(let s=0;s<e.dimensions.length;s++)if(e.dimensions[s].key===t)return e.dimensions[s].value;return null}function m(e,t){if(!e||!e.state||!e.state[t])return null;let s=e.state[t];return Array.isArray(s)?s:[s]}function b(e,t){return`${e}:${t}`}const g=["quarantined","error","id"],v=["disk_space","uptime","running_time","task","status","version","external_ip","internal_ip","mp_lease_id","mp_lease_expires","last_seen","first_seen","battery_level","battery_voltage","battery_temperature","battery_status","battery_health","bot_temperature","device_temperature","is_mp_bot"],k={id:"Bot Id",mp_lease_id:"Machine Provider Lease Id",task:"Current Task",android_devices:"Android Devices",battery_health:"Battery Health",battery_level:"Battery Level (%)",battery_status:"Battery Status",battery_temperature:"Battery Temp (°C)",battery_voltage:"Battery Voltage (mV)",bot_temperature:"Bot Temp (°C)",cores:"Cores",cpu:"CPU",device:"Non-android Device",device_os:"Device OS",device_temperature:"Device Temp (°C)",device_type:"Device Type",disk_space:"Free Space (MB)",external_ip:"External IP",first_seen:"First Seen",gpu:"GPU",internal_ip:"Internal or Local IP",last_seen:"Last Seen",mp_lease_expires:"Machine Provider Lease Expires",os:"OS",pool:"Pool",running_time:"Swarming Uptime",status:"Status",uptime:"Bot Uptime",xcode_version:"XCode Version"},y={id:(e,t,s)=>e*d()(t.bot_id,s.bot_id)},w={id:(e,t)=>i["a"]`<a target=_blank rel=noopener href=${function(e){return`/bot?id=${e}`}(e.bot_id)}>${e.bot_id}</a>`,status:(e,t)=>{if(e.is_dead)return`Dead. Last seen ${function(e){let t=(("number"==typeof e?e:Date.parse(e))-Date.now())/1e3;return t<0&&(t*=-1),h(t,c)}(e.last_seen_ts)} ago`;if(e.quarantined){let t=m(e,"quarantined");t&&(t=t[0]),t&&"true"!==t&&!0!==t||(t=_(e,"error")[0]),"UNKNOWN"===t&&(t=f(e,"quarantined")||"UNKNOWN");let s=[];return function(e){return e.state.devices||[]}(e).forEach(function(e){"available"!==e.state&&s.push(e.state)}),s.length&&(t+=` [${s.join(",")}]`),`Quarantined: ${t}`}return e.maintenance_msg?`Maintenance: ${e.maintenance_msg}`:"Alive"},task:(e,t)=>e.task_id?i["a"]`<a target=_blank rel=noopener title=${e.task_name} href=${function(e,t){if(e)return t||(e=e.substring(0,e.length-1)+"0"),`/task?id=${e}`}(e.task_id)}>${e.task_id}</a>`:"idle"};var x=s(6);const E=(e,t)=>i["a"]` <tr class$="bot-row ${t._botClass(e)}">${t._cols.map(s=>((e,t,s)=>i["a"]` <td>${p(e,t,s)}</td> `)(s,e,t))}</tr> `,A=e=>i["a"]`  <select-sk class="selector keys" on-selection-changed=${t=>e._primayKeyChanged(t)}> ${e._primaryArr.map(t=>((e,t)=>i["a"]` <div class=item selected?=${t._primaryKey===e}> <span class=key>${e}</span> <span class=flex></span> <checkbox-sk checked?=${t._cols.indexOf(e)>=0} disabled?=${t._forcedColumns.indexOf(e)>=0} on-click=${s=>t._toggleCol(s,e)}> </checkbox-sk> </div> `)(t,e))} </select-sk>  <select-sk class="selector values" disabled> ${(e=>{let t=e._primaryMap[e._primaryKey];return t?t.map(t=>i["a"]`<div class=item> <span class=value>${t}</span> <span class=flex></span> <arrow-forward-icon-sk hidden?=${e._filters.indexOf(b(e._primaryKey,t))>=0} on-click=${()=>e._addFilter(e._primaryKey,t)}> </arrow-forward-icon-sk> </div>`):i["a"]`<div class="information_only">Only dimensions can be used for filtering. <i>${e._primaryKey}</i> is a part of the bot's state and is informational only.</div>`})(e)} </select-sk>  <select-sk class="selector filters" disabled> ${e._filters.map(t=>((e,t)=>i["a"]` <div class=item> <span class=filter>${e}</span> <span class=flex></span> <remove-circle-outline-icon-sk on-click=${()=>t._removeFilter(e)}> </remove-circle-outline-icon-sk> </div> `)(t,e))} </select-sk> `,C=e=>i["a"]` <swarming-app id=swapp client_id=${e.client_id} testing_offline=${e.testing_offline}> <header> <div class=title>Swarming Server</div> <aside class=hideable> <a href=/>Home</a> <a href=/botlist>Bot List</a> <a href=/tasklist>Task List</a> </aside> </header> <main> <h2 class=message hidden?=${e.loggedInAndAuthorized}>${e._message}</h2> ${A(e)} <table class=bot-table hidden?=${!e.loggedInAndAuthorized}> <thead><tr>${e._cols.map(t=>((e,t)=>i["a"]` <th>${k[e]||e} <sort-toggle key=${e} current=${t._sort} direction=${t._dir}></sort-toggle> </th> `)(t,e))}</tr></thead> <tbody>${e._sortBots().map(t=>E(t,e))}</tbody> </table> </main> <footer><error-toast-sk></error-toast-sk></footer> </swarming-app>`;window.customElements.define("bot-list",class extends x.a{constructor(){super(C),this._bots=[],this._forcedColumns=["id"],this._cols=["id","task","os","status"],this._filters=["pool:Skia","likesDogs:yes"],this._primaryKey="os",this._primaryArr=[],this._primaryMap={},this._dimensions=[],this._limit=100,this._sort="id",this._dir="asc",this._verbose=!1,this._message="You must sign in to see anything useful."}connectedCallback(){super.connectedCallback(),this.addEventListener("log-in",e=>{this._fetch(),this.render()}),this.addEventListener("sort-change",e=>{this._sort=e.detail.key,this._dir=e.detail.direction,this.render()}),this.render()}_addFilter(e,t){let s=b(e,t);this._filters.indexOf(s)>=0||(this._filters.push(s),this.render())}_botClass(e){let t="";return e.is_dead&&(t+="dead "),e.quarantined&&(t+="quarantined "),e.maintenance_msg&&(t+="maintenance "),e.version!==this.server_details.server_version&&(t+="old_version"),t}_fetch(){if(!this.loggedInAndAuthorized)return;let e={headers:{authorization:this.auth_header}};this.app.addBusyTasks(2),fetch("/_ah/api/swarming/v1/bots/list",e).then(o.a).then(e=>{this._bots=function(e){return e?(e.forEach(e=>{e.state=e.state&&JSON.parse(e.state)||{};let t=e.state.disks||{},s=Object.keys(t);if(s.length){e.disks=[];for(let i=0;i<s.length;i++)e.disks.push({id:s[i],mb:t[s[i]].free_mb});e.disks.sort(function(e,t){return t.mb-e.mb})}else e.disks=[{id:"unknown",mb:0}];e.state.temp=u(e.state.temp);let i=[],n=e&&e.state&&e.state.devices||{};for(let t in n){let s=n[t];s.serial=t,s.okay="available"===s.state;let r=f(e,"device_type")||["unknown"];s.device_type=r[0],s.temp=u(s.temp),i.push(s)}i.sort((e,t)=>e.serial<t.serial?-1:e.serial>t.serial?1:0),e.state.devices=i}),e):[]}(e.items),this.render(),this.app.finishedTask()}).catch(e=>this.fetchError(e,"bots/list")),fetch("/_ah/api/swarming/v1/bots/dimensions",e).then(o.a).then(e=>{this._dimensions=function(e){if(!e)return[];let t=[];return e.forEach(function(e){-1===g.indexOf(e.key)&&t.push(e.key)}),t.push("id"),t.sort(),t}(e.bots_dimensions),this._primaryMap=function(e){var t={};return(e=e||[]).forEach(function(e){g.indexOf(e.key)>=0||(t[e.key]=e.value)}),t.android_devices&&t.android_devices.push("0"),t.device_os&&t.device_os.push("none"),t.device_type&&t.device_type.push("none"),t.id=[],t.disk_space=[],t.task=["busy","idle"],t.status=["alive","dead","quarantined","maintenance"],t.is_mp_bot=["true","false"],t}(e.bots_dimensions),this._primaryArr=this._dimensions.concat(v),this.render(),this.app.finishedTask()}).catch(e=>this.fetchError(e,"bots/dimensions"))}_primayKeyChanged(e){this._primaryKey=this._primaryArr[e.detail.selection],this.render()}_removeFilter(e){let t=this._filters.indexOf(e);-1!==t&&(this._filters.splice(t,1),this.render())}_sortBots(){return function(e,t){e&&t?(e.forEach((e,t)=>{void 0!==e&&null!==e&&(e.__sortIdx=t)}),e.sort((e,s)=>{if(void 0===e||null===e)return void 0===s||null===s?0:1;if(void 0===s||null===s)return-1;let i=t(e,s);return 0===i?e.__sortIdx-s.__sortIdx:i})):console.warn("missing arguments to stableSort",e,t)}(this._bots,(e,t)=>{let s=this._sort;if(!s)return 0;let i=1;"desc"===this._dir&&(i=-1);let n=y[s];if(n)return n(i,e,t);let r=p(s,e,this);"none"===r&&(r="ZZZ");var a=p(s,t,this);return"none"===a&&(a="ZZZ"),i*d()(r,a)}),this._bots}_toggleCol(e,t){if(this._forcedColumns.indexOf(t)>=0)return;e.preventDefault(),e.stopPropagation();let s=this._cols.indexOf(t);s>=0?this._cols.splice(s,1):this._cols.push(t),this.render()}});s(15)},,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t){}]);