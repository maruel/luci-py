!function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(s,n,function(t){return e[t]}.bind(null,n));return s},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/newres/",t(t.s=0)}([function(e,t,i){"use strict";function s(e,t){if(e.hasOwnProperty(t)){let i=e[t];delete e[t],e[t]=i}}function n(e,t,i=function(e){let t=l.get(e.type);void 0===t&&(t=new Map,l.set(e.type,t));let i=t.get(e.strings);return void 0===i&&(i=new g(e,e.getTemplateElement()),t.set(e.strings,i)),i}){const s=i(e);let n=t.__templateInstance;if(void 0!==n&&n.template===s&&n._partCallback===e.partCallback)return void n.update(e.values);n=new y(s,e.partCallback,i),t.__templateInstance=n;const r=n._clone();n.update(e.values),E(t,t.firstChild),t.appendChild(r)}function r(e){const t=e.lastIndexOf(">");return-1<e.indexOf("<",t+1)?e.length:t}function o(e,t=1e4){"object"==typeof e&&(e=e.message||JSON.stringify(e));var i={message:e,duration:t};document.dispatchEvent(new CustomEvent("error-sk",{detail:i,bubbles:!0}))}function a(e){if(e.ok)return e.json();throw"Bad network response."}i.r(t),window.customElements.define("toast-sk",class extends HTMLElement{constructor(){super(),this._timer=null}connectedCallback(){this.hasAttribute("duration")||(this.duration=5e3),s(this,"duration")}get duration(){return+this.getAttribute("duration")}set duration(e){this.setAttribute("duration",e)}show(){this.setAttribute("shown",""),0<this.duration&&!this._timer&&(this._timer=window.setTimeout(()=>{this._timer=null,this.hide()},this.duration))}hide(){this.removeAttribute("shown"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)}}),i(7),window.customElements.define("error-toast-sk",class extends HTMLElement{connectedCallback(){this.innerHTML="<toast-sk></toast-sk>",this._toast=this.firstElementChild,document.addEventListener("error-sk",this)}disconnectedCallback(){document.removeEventListener("error-sk",this)}handleEvent(e){e.detail.duration&&(this._toast.duration=e.detail.duration),this._toast.textContent=e.detail.message,this._toast.show()}});i(1),i(5),i(4);const l=new Map;class h{constructor(e,t,i,s=k){this.strings=e,this.values=t,this.type=i,this.partCallback=s}getHTML(){const e=this.strings.length-1;let t="",i=!0;for(let s=0;s<e;s++){const e=this.strings[s];t+=e;const n=r(e);t+=(i=-1<n?n<e.length:i)?u:c}return t+this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const c=`{{lit-${(Math.random()+"").slice(2)}}}`,u=`\x3c!--${c}--\x3e`,d=new RegExp(`${c}|${u}`),_=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;class p{constructor(e,t,i,s,n){this.type=e,this.index=t,this.name=i,this.rawName=s,this.strings=n}}class g{constructor(e,t){this.parts=[],this.element=t;const i=this.element.content,s=document.createTreeWalker(i,133,null,!1);let n=-1,r=0;const o=[];for(let t,i;s.nextNode();){n++,t=i;const a=i=s.currentNode;if(1===a.nodeType){if(!a.hasAttributes())continue;const t=a.attributes;let i=0;for(let e=0;e<t.length;e++)0<=t[e].value.indexOf(c)&&i++;for(;0<i--;){const i=e.strings[r],s=_.exec(i)[1],o=t.getNamedItem(s),l=o.value.split(d);this.parts.push(new p("attribute",n,o.name,s,l)),a.removeAttribute(o.name),r+=l.length-1}}else if(3===a.nodeType){const e=a.nodeValue;if(0>e.indexOf(c))continue;const t=a.parentNode,i=e.split(d),s=i.length-1;r+=s,a.textContent=i[s];for(let e=0;e<s;e++)t.insertBefore(document.createTextNode(i[e]),a),this.parts.push(new p("node",n++))}else if(8===a.nodeType&&a.nodeValue===c){const e=a.parentNode,s=a.previousSibling;null===s||s!==t||s.nodeType!==Node.TEXT_NODE?e.insertBefore(document.createTextNode(""),a):n--,this.parts.push(new p("node",n++)),o.push(a),null===a.nextSibling?e.insertBefore(document.createTextNode(""),a):n--,i=t,r++}}for(const e of o)e.parentNode.removeChild(e)}}const f=(e,t)=>m(t)?(t=t(e),v):null===t?void 0:t,m=e=>"function"==typeof e&&!0===e.__litDirective,v={},b=e=>null===e||"object"!=typeof e&&"function"!=typeof e;class w{constructor(e,t,i,s){this.instance=e,this.element=t,this.name=i,this.strings=s,this.size=s.length-1,this._previousValues=[]}_interpolate(e,t){const i=this.strings,s=i.length-1;let n="";for(let r=0;r<s;r++){n+=i[r];const s=f(this,e[t+r]);if(s&&s!==v&&(Array.isArray(s)||"string"!=typeof s&&s[Symbol.iterator]))for(const e of s)n+=e;else n+=s}return n+i[s]}_equalToPreviousValues(e,t){for(let i=t;i<t+this.size;i++)if(this._previousValues[i]!==e[i]||!b(e[i]))return!1;return!0}setValue(e,t){if(this._equalToPreviousValues(e,t))return;const i=this.strings;let s;2===i.length&&""===i[0]&&""===i[1]?(s=f(this,e[t]),Array.isArray(s)&&(s=s.join(""))):s=this._interpolate(e,t),s!==v&&this.element.setAttribute(this.name,s),this._previousValues=e}}class x{constructor(e,t,i){this.instance=e,this.startNode=t,this.endNode=i,this._previousValue=void 0}setValue(e){if((e=f(this,e))!==v)if(b(e)){if(e===this._previousValue)return;this._setText(e)}else e instanceof h?this._setTemplateResult(e):Array.isArray(e)||e[Symbol.iterator]?this._setIterable(e):e instanceof Node?this._setNode(e):void 0===e.then?this._setText(e):this._setPromise(e)}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_setNode(e){this._previousValue!==e&&(this.clear(),this._insert(e),this._previousValue=e)}_setText(e){const t=this.startNode.nextSibling;e=void 0===e?"":e,t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._setNode(document.createTextNode(e)),this._previousValue=e}_setTemplateResult(e){const t=this.instance._getTemplate(e);let i;this._previousValue&&this._previousValue.template===t?i=this._previousValue:(i=new y(t,this.instance._partCallback,this.instance._getTemplate),this._setNode(i._clone()),this._previousValue=i),i.update(e.values)}_setIterable(e){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);const t=this._previousValue;let i=0;for(const s of e){let e=t[i];if(void 0===e){let s=this.startNode;0<i&&(s=t[i-1].endNode=document.createTextNode(""),this._insert(s)),e=new x(this.instance,s,this.endNode),t.push(e)}e.setValue(s),i++}if(0==i)this.clear(),this._previousValue=void 0;else if(i<t.length){const e=t[i-1];t.length=i,this.clear(e.endNode.previousSibling),e.endNode=this.endNode}}_setPromise(e){this._previousValue=e,e.then(t=>{this._previousValue===e&&this.setValue(t)})}clear(e=this.startNode){E(this.startNode.parentNode,e.nextSibling,this.endNode)}}const k=(e,t,i)=>{if("attribute"===t.type)return new w(e,i,t.name,t.strings);if("node"===t.type)return new x(e,i,i.nextSibling);throw new Error(`Unknown part type ${t.type}`)};class y{constructor(e,t,i){this._parts=[],this.template=e,this._partCallback=t,this._getTemplate=i}update(e){let t=0;for(const i of this._parts)void 0===i.size?(i.setValue(e[t]),t++):(i.setValue(e,t),t+=i.size)}_clone(){const e=document.importNode(this.template.element.content,!0),t=this.template.parts;if(0<t.length){const i=document.createTreeWalker(e,133,null,!1);let s=-1;for(let e=0;e<t.length;e++){const n=t[e];for(;s<n.index;)s++,i.nextNode();this._parts.push(this._partCallback(this,n,i.currentNode))}}return e}}const E=(e,t,i=null)=>{for(let s=t;s!==i;){const t=s.nextSibling;e.removeChild(s),s=t}},T=(e,...t)=>new h(e,t,"html",N),N=(e,t,i)=>{if("attribute"===t.type){if(t.rawName.startsWith("on-")){return new class{constructor(e,t,i){this.instance=e,this.element=t,this.eventName=i}setValue(e){const t=f(this,e),i=this._listener;t!==i&&(this._listener=t,null!=i&&this.element.removeEventListener(this.eventName,i),null!=t&&this.element.addEventListener(this.eventName,t))}}(e,i,t.rawName.slice(3))}if(t.name.endsWith("$")){const s=t.name.slice(0,-1);return new w(e,i,s,t.strings)}if(t.name.endsWith("?")){return new class extends w{setValue(e,t){const i=this.strings;if(2!==i.length||""!==i[0]||""!==i[1])throw new Error("boolean attributes can only contain a single expression");{const i=f(this,e[t]);if(i===v)return;i?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}}(e,i,t.name.slice(0,-1),t.strings)}return new class extends w{setValue(e,t){const i=this.strings;let s;this._equalToPreviousValues(e,t)||((s=2===i.length&&""===i[0]&&""===i[1]?f(this,e[t]):this._interpolate(e,t))!==v&&(this.element[this.name]=s),this._previousValues=e)}}(e,i,t.rawName,t.strings)}return k(e,t,i)};window.customElements.define("oauth-login",class extends HTMLElement{connectedCallback(){s(this,"client_id"),s(this,"testing_offline"),this.auth_header="",this.testing_offline?this.profile={email:"missing@chromium.org",imageURL:"http://storage.googleapis.com/gd-wagtail-prod-assets/original_images/logo_google_fonts_color_2x_web_64dp.png"}:(this.profile=null,document.addEventListener("oauth-lib-loaded",()=>{gapi.auth2.init({client_id:this.client_id}).then(()=>{this._maybeFireLoginEvent(),this._render()},e=>{console.error(e),o(`Error initializing oauth: ${JSON.stringify(e)}`,1e4)})})),this._render()}static get observedAttributes(){return["client_id","testing_offline"]}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.getAttribute("testing_offline")}set testing_offline(e){e&&"false"!==e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}_maybeFireLoginEvent(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e.isSignedIn()){let t=e.getBasicProfile();this.profile={email:t.getEmail(),imageURL:t.getImageUrl()};let i=e.getAuthResponse(!0),s=`${i.token_type} ${i.access_token}`;return this.dispatchEvent(new CustomEvent("log-in",{detail:{auth_header:s},bubbles:!0})),this.auth_header=s,!0}return this.profile=null,this.auth_header="",!1}_logIn(){if(this.testing_offline)this.auth_header="Bearer 12345678910-boomshakalaka",this.dispatchEvent(new CustomEvent("log-in",{detail:{auth_header:this.auth_header},bubbles:!0})),this._render();else{let e=gapi.auth2.getAuthInstance();e&&e.signIn({scope:"email",prompt:"select_account"}).then(()=>{this._maybeFireLoginEvent()||console.warn("login was not successful; maybe user canceled"),this._render()})}}_logOut(){if(this.testing_offline)this.auth_header="",this._render(),window.location.reload();else{let e=gapi.auth2.getAuthInstance();e&&e.signOut().then(()=>{this.auth_header="",this.profile=null,window.location.reload()})}}_render(){n((e=>e.auth_header?T` <div> <img class=center id=avatar src="${e.profile.imageURL}" width=30 height=30> <span class=center>${e.profile.email}</span> <span class=center>|</span> <a class=center on-click=${()=>e._logOut()} href="#">Sign out</a> </div>`:T` <div> <a on-click=${()=>e._logIn()} href="#">Sign in</a> </div>`)(this),this)}attributeChangedCallback(){this._render()}});const V=document.createElement("template");V.innerHTML="\n<button class=toggle-button>\n  <icon-menu-sk>\n  </icon-menu-sk>\n</button>\n";window.customElements.define("swarming-app",class extends HTMLElement{connectedCallback(){s(this,"client_id"),s(this,"testing_offline"),this._addHTML(),this._render()}static get observedAttributes(){return["client_id","testing_offline"]}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.getAttribute("testing_offline")}set testing_offline(e){e&&"false"!==e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}_addHTML(){let e=this.querySelector("header"),t=e&&e.querySelector("aside");if(!(e&&t&&t.classList.contains("hideable")))return;let i=V.content.cloneNode(!0);e.insertBefore(i,e.firstElementChild),(i=e.firstElementChild).addEventListener("click",e=>this._toggleMenu(e,t));let s=document.createElement("span");s.classList.add("grow"),e.appendChild(s),this._loginEle=document.createElement("div"),e.appendChild(this._loginEle)}_toggleMenu(e,t){t.classList.toggle("shown")}_render(){this._loginEle&&n((e=>T` <oauth-login client_id=${e.client_id} testing_offline=${e.testing_offline}></oauth-login> `)(this),this._loginEle)}attributeChangedCallback(){this._render()}}),i(3);const C=e=>T` <swarming-app id="swapp" client_id="${e.client_id}" testing_offline="${e.testing_offline}"> <header> <div class=title>Swarming Server</div> <aside class=hideable> <a href=/>Home</a> <a href=/botlist>Bot List</a> <a href=/tasklist>Task List</a> </aside> </header> <main> <h2>Service Status</h2> <div>Server Version: ${e._server_details.server_version}</div> <div>Bot Version: ${e._server_details.bot_version} </div> <ul> <li>  <a href=/stats>Usage statistics</a> </li> <li> <a href=/restricted/mapreduce/status>Map Reduce Jobs</a> </li> <li> <a href=${(e=>"https://console.cloud.google.com/appengine/instances"+`project=${e._project_id}&versionId=${e._server_details.server_version}`)(e)}>View version's instances on Cloud Console</a> </li> <li> <a><a href=${(e=>`https://console.cloud.google.com/errors?project=${e}`)(e._project_id)}>View server errors on Cloud Console</a></a> </li> <li> <a><a href=${(e=>`https://console.cloud.google.com/logs/viewer?filters=status:500..599&project=${e}`)(e._project_id)}>View logs for HTTP 5xx on Cloud Console</a></a> </li> </ul> <h2>Configuration</h2> <ul>  <li> <a href="/restricted/config">View server config</a> </li> <li> <a href="/restricted/upload/bootstrap">View/upload bootstrap.py</a> </li> <li> <a href="/restricted/upload/bot_config">View/upload bot_config.py</a> </li> <li> <a href="/auth/groups">View/edit user groups</a> </li> </ul> ${e._permissions.get_bootstrap_token?(e=>T` <div> <h2>Bootstrapping a bot</h2> To bootstrap a bot, run one of these (all links are valid for 1 hour): <ol> <li> <strong> TL;DR; </strong> <pre class="command">python -c "import urllib; exec urllib.urlopen('${e._host_url}/bootstrap?tok=${e._bootstrap_token}').read()"</pre> </li> <li> Escaped version to pass as a ssh argument: <pre class="command">'python -c "import urllib; exec urllib.urlopen('"'${e._host_url}/bootstrap?tok=${e._bootstrap_token}'"').read()"'</pre> </li> <li> Manually: <pre class="command">mkdir bot; cd bot
rm -f swarming_bot.zip; curl -sSLOJ ${e._host_url}/bot_code?tok=${e._bootstrap_token}
python swarming_bot.zip</pre> </li> </ol> </div> `)(e):""} </main> <footer><error-toast-sk></error-toast-sk></footer> </swarming-app>`;window.customElements.define("swarming-index",class extends HTMLElement{constructor(){super(),this._server_details={server_version:"You must log in to see more details",bot_version:""},this._permissions={},this._bootstrap_token="...";let e=location.hostname.indexOf(".appspot.com");this._project_id=location.hostname.substring(0,e)||"not_found",this._host_url=location.origin}static get observedAttributes(){return["client_id","testing_offline"]}get client_id(){return this.getAttribute("client_id")}set client_id(e){return this.setAttribute("client_id",e)}get testing_offline(){return this.getAttribute("testing_offline")}set testing_offline(e){e&&"false"!==e?this.setAttribute("testing_offline",!0):this.removeAttribute("testing_offline")}update(){if(this.auth_header){this._server_details={server_version:"<loading>",bot_version:"<loading>"};let e={headers:{authorization:this.auth_header}};fetch("/_ah/api/swarming/v1/server/details",e).then(a).then(e=>{this._server_details=e,this._render()}).catch(e=>{console.error(e),o(`Error loading details: ${e.body}`,5e3)}),fetch("/_ah/api/swarming/v1/server/permissions",e).then(a).then(e=>{this._permissions=e,this._render()}).catch(e=>{console.error(e),o(`Error loading permissions: ${e.body}`,5e3)}),e.method="POST",fetch("/_ah/api/swarming/v1/server/token",e).then(a).then(e=>{this._bootstrap_token=e.bootstrap_token,this._render()}).catch(e=>{console.error(e),o(`Error loading token: ${e.body}`,5e3)})}}connectedCallback(){s(this,"client_id"),s(this,"testing_offline"),this.addEventListener("log-in",e=>{this.auth_header=e.detail.auth_header,this.update()}),this._render(),window.setTimeout(()=>this.update())}_render(){n(C(this),this)}attributeChangedCallback(){this._render()}}),i(2)},function(){const e=document.createElement("template");e.innerHTML='<svg class="icon-sk-svg" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false">\n  <g><path d=""></path></g>\n</svg>';class t extends HTMLElement{connectedCallback(){let t=e.content.cloneNode(!0);t.querySelector("path").setAttribute("d",this.constructor._path),this.appendChild(t)}}window.customElements.define("icon-menu-sk",class extends t{static get _path(){return"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}}),window.customElements.define("icon-link-sk",class extends t{static get _path(){return"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}}),window.customElements.define("icon-check-sk",class extends t{static get _path(){return"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}}),window.customElements.define("icon-warning-sk",class extends t{static get _path(){return"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}}),window.customElements.define("icon-create-sk",class extends t{static get _path(){return"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}),window.customElements.define("icon-alarm-sk",class extends t{static get _path(){return"M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}})},function(){},function(){},function(){},function(){},,function(){}]);