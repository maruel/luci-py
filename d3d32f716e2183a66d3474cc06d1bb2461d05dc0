{
  "comments": [
    {
      "key": {
        "uuid": "2e1ea9ec_d95f8df1",
        "filename": "client/utils/subprocess42.py",
        "patchSetId": 3
      },
      "lineNbr": 500,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-05-30T20:44:56Z",
      "side": 1,
      "message": "There\u0027s a few others.",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcad0e71_b185af93",
        "filename": "client/utils/tools.py",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-05-30T20:44:56Z",
      "side": 1,
      "message": "Can you expand on why you cannot use get_main_script_path() here?",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6abfd79_50a14e10",
        "filename": "client/utils/tools.py",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 1116794
      },
      "writtenOn": "2019-05-30T22:08:12Z",
      "side": 1,
      "message": "get_main_script_path() will return the path to the test file when run unit tests, is_zipped_module will try to load the module by filename, which is not supported.\n\nGot the follow error when use get_main_script_path:\nTraceback (most recent call last):\n  File \"tests/auth_server_test.py\", line 13, in \u003cmodule\u003e\n    import test_env\n  File \"/usr/local/google/home/leilei/clients/luci-py/client/tests/test_env.py\", line 26, in \u003cmodule\u003e\n    from utils import fs\n  File \"/usr/local/google/home/leilei/clients/luci-py/client/utils/fs.py\", line 15, in \u003cmodule\u003e\n    tools.force_local_third_party()\n  File \"/usr/local/google/home/leilei/clients/luci-py/client/utils/tools.py\", line 387, in force_local_third_party\n    if zip_package.is_zipped_module(zip_package.get_main_script_path()):\n  File \"/usr/local/google/home/leilei/clients/luci-py/client/utils/zip_package.py\", line 246, in is_zipped_module\n    return bool(get_module_zip_archive(module))\n  File \"/usr/local/google/home/leilei/clients/luci-py/client/utils/zip_package.py\", line 238, in get_module_zip_archive\n    loader \u003d pkgutil.get_loader(module)\n  File \"/usr/lib/python2.7/pkgutil.py\", line 462, in get_loader\n    return find_loader(fullname)\n  File \"/usr/lib/python2.7/pkgutil.py\", line 472, in find_loader\n    for importer in iter_importers(fullname):\n  File \"/usr/lib/python2.7/pkgutil.py\", line 428, in iter_importers\n    __import__(pkg)\nImportError: Import by filename is not supported.",
      "parentUuid": "fcad0e71_b185af93",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "089dd14a_f8b41962",
        "filename": "client/utils/tools.py",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-05-31T13:43:02Z",
      "side": 1,
      "message": "Ok then it\u0027s problematic. Let\u0027s skip this change completely from this CL so that the rest can be checked in, then focus on this specific problem separately because the proposed code as-is cannot be used.",
      "parentUuid": "d6abfd79_50a14e10",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e69a66a_58d98df4",
        "filename": "client/utils/tools.py",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 1116794
      },
      "writtenOn": "2019-05-31T17:59:47Z",
      "side": 1,
      "message": "I have to land this change in this cl and another one under review, otherwise the presubmit will be failed:(, since it can not import six or httplib2 modules without this change.",
      "parentUuid": "089dd14a_f8b41962",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7c70dcd_fd5dcb46",
        "filename": "client/utils/tools.py",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-05-31T18:38:34Z",
      "side": 1,
      "message": "You cannot in python 3, but it should work just fine in python 2, so this is not a breaking change.",
      "parentUuid": "2e69a66a_58d98df4",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ab47304_466624e4",
        "filename": "client/utils/tools.py",
        "patchSetId": 3
      },
      "lineNbr": 387,
      "author": {
        "id": 1116794
      },
      "writtenOn": "2019-05-31T18:54:16Z",
      "side": 1,
      "message": "I removed this change, and triggered CQ, but got import error when run tests/logging_utils_test.py. It is failed to find six module:(\n\ntests/logging_utils_test.py (0.78s) failed\ntest_capture (__main__.Test) ... ok\ntest_prepare_logging (__main__.Test) ... ok\ntest_rotating (__main__.Test) ... Traceback (most recent call last):\n  File \"phase1.py\", line 15, in \u003cmodule\u003e\n    from utils import logging_utils\n  File \"/b/s/w/ir/cache/builder/luci_py_try_presubmit/infra/luci/client/utils/logging_utils.py\", line 18, in \u003cmodule\u003e\n    from utils import file_path\n  File \"/b/s/w/ir/cache/builder/luci_py_try_presubmit/infra/luci/client/utils/file_path.py\", line 25, in \u003cmodule\u003e\n    from utils import fs\n  File \"/b/s/w/ir/cache/builder/luci_py_try_presubmit/infra/luci/client/utils/fs.py\", line 18, in \u003cmodule\u003e\n    from six.moves import builtins\nImportError: No module named six.moves",
      "parentUuid": "b7c70dcd_fd5dcb46",
      "revId": "d3d32f716e2183a66d3474cc06d1bb2461d05dc0",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}