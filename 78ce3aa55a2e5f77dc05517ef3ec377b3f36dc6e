{
  "comments": [
    {
      "key": {
        "uuid": "37a878e0_04b53175",
        "filename": "appengine/swarming/handlers_bot.py",
        "patchSetId": 4
      },
      "lineNbr": 209,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-10-11T13:19:29Z",
      "side": 0,
      "message": "I think we should instead redirect to the current version. This would then enable always having a cache hit (through a redirect, but that\u0027s relatively cheap).",
      "revId": "78ce3aa55a2e5f77dc05517ef3ec377b3f36dc6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba0e2fe5_4ba349d1",
        "filename": "appengine/swarming/handlers_bot.py",
        "patchSetId": 4
      },
      "lineNbr": 209,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2019-10-11T13:50:39Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "37a878e0_04b53175",
      "revId": "78ce3aa55a2e5f77dc05517ef3ec377b3f36dc6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e3a814a_638c371e",
        "filename": "appengine/swarming/handlers_bot.py",
        "patchSetId": 4
      },
      "lineNbr": 211,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-10-11T13:19:29Z",
      "side": 0,
      "message": "I\u0027d prefer to keep the else and redirect to the versioned path.",
      "revId": "78ce3aa55a2e5f77dc05517ef3ec377b3f36dc6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2a5a21b_a0f57738",
        "filename": "appengine/swarming/handlers_bot.py",
        "patchSetId": 4
      },
      "lineNbr": 211,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2019-10-11T13:50:39Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "5e3a814a_638c371e",
      "revId": "78ce3aa55a2e5f77dc05517ef3ec377b3f36dc6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "85da75c5_8d0d3a50",
        "filename": "appengine/swarming/handlers_bot.py",
        "patchSetId": 6
      },
      "lineNbr": 209,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-10-11T13:57:48Z",
      "side": 0,
      "message": "I wonder if we should change this to a redirect. My concern is to cause a request to jump around versions, especially when a new bot_groups_cfg is pushed, but it\u0027s probably better than returning a 404, which will cause naive curl bootstrap to fail. The reason I care is that all of the sudden, this code path may be triggered a lot more now than there\u0027s a redirect with the version-less path. This happens in two cases:\n- Default version switch, where for a period of time a request may randomly hit one or the other\n- Canarying with trivial curl, which doesn\u0027t uses GOOGAPPUID cookie, as per https://cloud.google.com/appengine/docs/standard/python/splitting-traffic.\n- bot_groups_cfg update; https://cs.chromium.org/chromium/infra/luci/appengine/swarming/server/bot_groups_config.py for more details.",
      "revId": "78ce3aa55a2e5f77dc05517ef3ec377b3f36dc6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a5d1497_9cb2a546",
        "filename": "appengine/swarming/handlers_bot.py",
        "patchSetId": 6
      },
      "lineNbr": 209,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2019-10-11T14:04:07Z",
      "side": 0,
      "message": "I see, changed to do redirect here too.",
      "parentUuid": "85da75c5_8d0d3a50",
      "revId": "78ce3aa55a2e5f77dc05517ef3ec377b3f36dc6e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}