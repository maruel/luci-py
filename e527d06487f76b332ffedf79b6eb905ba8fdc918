{
  "comments": [
    {
      "key": {
        "uuid": "13cbf01b_fb11fd5a",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 120,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "That\u0027s kind of opaque for what boils down to approximatively\n\n  self.duration \u003d cls._parse_string(value)",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed321e99_8afccc04",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 120,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "this is all refactored now",
      "parentUuid": "13cbf01b_fb11fd5a",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eeaa874b_da2b484a",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 142,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "I\u0027d prefer consistent single quotes everywhere.",
      "range": {
        "startLine": 142,
        "startChar": 12,
        "endLine": 142,
        "endChar": 13
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5911df0a_3dae3adc",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 142,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "eeaa874b_da2b484a",
      "range": {
        "startLine": 142,
        "startChar": 12,
        "endLine": 142,
        "endChar": 13
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95462077_6c9fa517",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 157,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "can you extract this to a variable to help readability?\n\nAlso see line 134. :)",
      "range": {
        "startLine": 157,
        "startChar": 17,
        "endLine": 157,
        "endChar": 67
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b21c4bf_e03d2fa0",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 157,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "95462077_6c9fa517",
      "range": {
        "startLine": 157,
        "startChar": 17,
        "endLine": 157,
        "endChar": 67
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c56d7d57_fa9bc5eb",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "Optional redesign: While I understand why you did it this way, I think I would have preferred to separate the argument parsing (lines 84 to 120) and the runtime execution (lines 122 to 168) which could simply be a stand alone function, that this function here would call. Then this function can simply accept a duration for the split. This is less extensible, but I don\u0027t feel we need it to be generic.",
      "range": {
        "startLine": 549,
        "startChar": 56,
        "endLine": 549,
        "endChar": 68
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c67616f_41a5a8eb",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done :)\n\nOriginally I thought the user would need to specify start and stop percentages, but this was before I added logic to resume from a partial rollout automatically. So RollOptions used to have start_percent, end_percent and duration.\n\nSimplified this so that opts.roll_duration is simply the number of seconds as a float.",
      "parentUuid": "c56d7d57_fa9bc5eb",
      "range": {
        "startLine": 549,
        "startChar": 56,
        "endLine": 549,
        "endChar": 68
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "805c5ea2_a6ea3b9b",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 554,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "I\u0027d prefer to keep everything with single quotes for consistency.",
      "range": {
        "startLine": 554,
        "startChar": 10,
        "endLine": 554,
        "endChar": 11
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "acfaff81_bdd4a2d1",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 554,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "805c5ea2_a6ea3b9b",
      "range": {
        "startLine": 554,
        "startChar": 10,
        "endLine": 554,
        "endChar": 11
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7989461e_e6dd2564",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 555,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "Maybe at least make this a variable to make it a bit more readable? Or just create a \u0027url\u0027 variable.",
      "range": {
        "startLine": 555,
        "startChar": 61,
        "endLine": 555,
        "endChar": 77
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1c94cfd1_406edba6",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 555,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7989461e_e6dd2564",
      "range": {
        "startLine": 555,
        "startChar": 61,
        "endLine": 555,
        "endChar": 77
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "98e96cdb_59ee67f5",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 579,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-26T01:02:21Z",
      "side": 1,
      "message": "I did this because I realized that due to golo, many of our apps will have very lopsided traffic distribution by-IP.",
      "range": {
        "startLine": 579,
        "startChar": 43,
        "endLine": 579,
        "endChar": 49
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8418fe13_a35ae6b9",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 579,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "That\u0027s a problem for the Swarming server, which explicitly uses cookies for traffic splitting. But that\u0027s a one-off in term of Chrome services.\n\nI think it\u0027s fine here, we just won\u0027t be able to use this for Swarming, but we weren\u0027t anyway so there\u0027s no change.",
      "parentUuid": "98e96cdb_59ee67f5",
      "range": {
        "startLine": 579,
        "startChar": 43,
        "endLine": 579,
        "endChar": 49
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39dce297_9096700c",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 579,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Does cookie splitting work for the swarming API? I don\u0027t think any of our clients (endpoints/prpc) support accepting cookies from the server...",
      "parentUuid": "8418fe13_a35ae6b9",
      "range": {
        "startLine": 579,
        "startChar": 43,
        "endLine": 579,
        "endChar": 49
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe07a296_e2a79092",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 595,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "why a tuple? I confirm and this has no effect on %r",
      "range": {
        "startLine": 595,
        "startChar": 25,
        "endLine": 595,
        "endChar": 27
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "573082f3_96aa81ba",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 595,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "fe07a296_e2a79092",
      "range": {
        "startLine": 595,
        "startChar": 25,
        "endLine": 595,
        "endChar": 27
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84d118d3_bbfbaaed",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 602,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "Why tuple?",
      "range": {
        "startLine": 602,
        "startChar": 45,
        "endLine": 602,
        "endChar": 55
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ae474cc_b1018c35",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 602,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-26T16:46:12Z",
      "side": 1,
      "message": "it\u0027s a good habit in python:\n\n  var \u003d \"hi\"\n  \"%s\" % var \u003d\u003d \"hi\"\n  \"%s\" % (var,) \u003d\u003d \"hi\"\n   \n  var \u003d (\"hi\", \"there\")  # or any other non-string sequence\n  \"%s\" % var  # exception! too many format arguments!\n  \"%s\" % (var,)  \u003d\u003d \u0027(\"hi\", \"there\")\u0027  # hmm, that doesn\u0027t look right, but I can debug it.",
      "parentUuid": "84d118d3_bbfbaaed",
      "range": {
        "startLine": 602,
        "startChar": 45,
        "endLine": 602,
        "endChar": 55
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ab3cf5a_c55bb196",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 602,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T17:01:54Z",
      "side": 1,
      "message": "Ok I\u0027m just not (yet) used to this, but it\u0027s fine.",
      "parentUuid": "6ae474cc_b1018c35",
      "range": {
        "startLine": 602,
        "startChar": 45,
        "endLine": 602,
        "endChar": 55
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ccf6c818_c09cbcd6",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 604,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "optional nit: print(\u0027\\nMigration complete!\u0027)",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1fd2d88_e2fc3ff1",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 604,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ccf6c818_c09cbcd6",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cd659fd_50ff92bc",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 818,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "Adding this would make it more trivial to understand:\n\n  Returns active version(s) sorted by smaller version number first.\n\nI mean it\u0027s not *strictly speaking* true but close enough.",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52154ede_e2281366",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 818,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7cd659fd_50ff92bc",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef61509d_eee83685",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 831,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2019-09-26T13:18:29Z",
      "side": 1,
      "message": "Small nit: I\u0027d prefer split(\u0027-\u0027, 1)\n\nAlso, spinnaker will fuck this up, I\u0027m fine to ignore for now.",
      "range": {
        "startLine": 831,
        "startChar": 57,
        "endLine": 831,
        "endChar": 68
      },
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd77a557_8d54e998",
        "filename": "appengine/components/tool_support/gae_sdk_utils.py",
        "patchSetId": 10
      },
      "lineNbr": 831,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2019-09-27T00:13:31Z",
      "side": 1,
      "message": "OK, Done.",
      "parentUuid": "ef61509d_eee83685",
      "range": {
        "startLine": 831,
        "startChar": 57,
        "endLine": 831,
        "endChar": 68
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e527d06487f76b332ffedf79b6eb905ba8fdc918",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}