{
  "comments": [
    {
      "key": {
        "uuid": "f87efd45_9442550c",
        "filename": "appengine/swarming/proto/resultdb/gen.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2020-04-15T16:28:29Z",
      "side": 1,
      "message": "this looks very ad-hoc. Is there a better way?\n\nAt the very least, this is inconsistent with Swarming:TokenServer interaction that does not import protos, but simply makes JSON requests:\nhttps://source.chromium.org/chromium/infra/infra/+/master:luci/appengine/swarming/server/service_accounts.py;l\u003d384;drc\u003d8761768ee83029ccefb8f59517afab54a0219edf\nRequests in go/resultdb-swarming are even simpler than TokenServer RPCs, so simple JSON is ought to work just fine?\n\n+Vadim in case he has better ideas",
      "revId": "9f37dcb2ab01e1bd98aba84f2036ef05ed4e3f13",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d76971d1_08ac4650",
        "filename": "appengine/swarming/proto/resultdb/gen.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-04-16T05:39:38Z",
      "side": 1,
      "message": "Yeah, json seems better now for this simple request.",
      "parentUuid": "f87efd45_9442550c",
      "revId": "9f37dcb2ab01e1bd98aba84f2036ef05ed4e3f13",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9bb90000_48d22778",
        "filename": "appengine/swarming/proto/resultdb/gen.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-04-21T10:36:36Z",
      "side": 1,
      "message": "After some investigation, I\u0027d like to rely on\nhttps://cs.chromium.org/chromium/infra/luci/appengine/components/components/prpc/client.py?l\u003d100\u0026rcl\u003d9c9445f56c7a160ee1cbcee0c3d93e895a5560e4\nto call prpc API especially for update-token in metadata.\n\nAnother idea is definiting subset of resultdb messages in python and use that.\nHow do you think?",
      "parentUuid": "d76971d1_08ac4650",
      "revId": "9f37dcb2ab01e1bd98aba84f2036ef05ed4e3f13",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e41f1a3f_543a9791",
        "filename": "appengine/swarming/proto/resultdb/gen.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2020-04-21T14:50:22Z",
      "side": 1,
      "message": "could you elaborate what exactly made you change your opinion? what\u0027s the problem retrieving/passing the update token? it is just a HTTP header \"Update-Token\". net module supports sending it (https://source.chromium.org/chromium/_/chromium/infra/luci/luci-py/+/7c3dab77e180261c57072bf376f8bba98c8557c0:appengine/components/components/net.py;l\u003d236;drc\u003d250c92d77b92e71d208b7b633d9997e96c0583b5;bpv\u003d0;bpt\u003d0) and receiving it (https://source.chromium.org/chromium/_/chromium/infra/luci/luci-py/+/7c3dab77e180261c57072bf376f8bba98c8557c0:appengine/components/components/net.py;l\u003d236;drc\u003d250c92d77b92e71d208b7b633d9997e96c0583b5;bpv\u003d0;bpt\u003d0)\n\nexcept it looks like we forgot to forward \"response_headers\" in net.json_request_async",
      "parentUuid": "9bb90000_48d22778",
      "revId": "9f37dcb2ab01e1bd98aba84f2036ef05ed4e3f13",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "433c7c88_faff47ff",
        "filename": "appengine/swarming/proto/resultdb/gen.sh",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-04-21T21:46:51Z",
      "side": 1,
      "message": "One more thing is prpc aware exception.\nhttps://cs.chromium.org/chromium/src/third_party/chromite/lib/luci/prpc/client.py?l\u003d142\u0026rcl\u003d150d04851644c632929cf05d99a4c40434086153\n\nDo you think it is better to have copy of subset of those logic?",
      "parentUuid": "e41f1a3f_543a9791",
      "revId": "9f37dcb2ab01e1bd98aba84f2036ef05ed4e3f13",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}