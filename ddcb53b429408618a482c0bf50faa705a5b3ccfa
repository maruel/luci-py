{
  "comments": [
    {
      "key": {
        "uuid": "aa876f14_4e9ae32b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-04-07T07:18:45Z",
      "side": 1,
      "message": "I think kbr\u0027s case is already covered by existing test?",
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b5af6cd_2dbf5b32",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2020-04-07T07:21:31Z",
      "side": 1,
      "message": "I thought the same. But this is bit different from existing tests because there is a bot quarantine step.",
      "parentUuid": "aa876f14_4e9ae32b",
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0009ccc0_9a77ce3e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-04-07T07:40:04Z",
      "side": 1,
      "message": "I think behavior of or dimension task and quarantine bot is orthogonal and don\u0027t feel worth adding test for combination of those behaviors?\n\nBetter to explain how the tasks are scheduled if kbr doesn\u0027t have confidence?",
      "parentUuid": "2b5af6cd_2dbf5b32",
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0434bb56_f420a003",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1375000
      },
      "writtenOn": "2020-04-07T07:41:36Z",
      "side": 1,
      "message": "It does seems a bit duplicative to me. I think maybe it\u0027s because i haven\u0027t figure out a place that wraps the entire swarming\u0027s scheduling logic, hence had to poll bots manually in the test. \n\nOne thing I hope I could have done:\n\nThe bot handlers are executed asynchronously on their own threads. After adding a task, instead of us manually triggering a poll, the main test thread just waits on a future representing the task completion result. We use thread primitives (e.g. CondVars) to create precise sync points, so that the tests run deterministically.\n\nThis would be a more realistic representation of how a distributed service actually runs. It would allow us to set up more interesting scenarios.\n\nAnyway, i think what i said is way beyond the scope of this CL. How about we leave this to kbr@ and let him decide whether this test is still necessary, since we already have https://cs.chromium.org/chromium/infra/luci/appengine/swarming/server/task_scheduler_test.py?l\u003d433\u0026rcl\u003d7e00c462fef9d624122f0f8405d9cc13ca6677d8?",
      "parentUuid": "aa876f14_4e9ae32b",
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbcb28d6_2c3ada13",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2020-04-07T08:21:47Z",
      "side": 1,
      "message": "ok, let\u0027s wait kbr\u0027s input",
      "parentUuid": "0434bb56_f420a003",
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dffce576_b0de08a0",
        "filename": "appengine/swarming/handlers_bot_test.py",
        "patchSetId": 1
      },
      "lineNbr": 484,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2020-04-07T17:38:45Z",
      "side": 1,
      "message": "Is there any way to more closely mimic the situation where the bots are busy, and then finish a task? Going from the quarantined to the non-quarantined state is not a common operation.",
      "range": {
        "startLine": 484,
        "startChar": 18,
        "endLine": 484,
        "endChar": 29
      },
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4de098fa_5791e16c",
        "filename": "appengine/swarming/handlers_bot_test.py",
        "patchSetId": 1
      },
      "lineNbr": 493,
      "author": {
        "id": 1105344
      },
      "writtenOn": "2020-04-07T17:38:45Z",
      "side": 1,
      "message": "Does this test any more code paths than the call to task_scheduler.bot_reap_task in https://source.chromium.org/chromium/infra/infra/+/master:luci/appengine/swarming/server/task_scheduler_test.py;drc\u003d7e00c462fef9d624122f0f8405d9cc13ca6677d8;l\u003d433?originalUrl\u003dhttps:%2F%2Fcs.chromium.org%2Fchromium%2Finfra%2Fluci%2Fappengine%2Fswarming%2Fserver%2Ftask_scheduler_test.py ?\n\nIf not, then I agree it\u0027s OK to not add this test. My main concern is to have testing of the scenario where the bots go from the state where they\u0027re busy, to the state where one (of either configuration) becomes available. If the other test covers this already, that\u0027s fine.",
      "range": {
        "startLine": 493,
        "startChar": 15,
        "endLine": 493,
        "endChar": 23
      },
      "revId": "ddcb53b429408618a482c0bf50faa705a5b3ccfa",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}